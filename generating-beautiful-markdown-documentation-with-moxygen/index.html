<!doctype html> <html class=no-js lang=en> <head> <title>Generating Beautiful C++ Markdown Documentation with Moxygen | Sourcey</title> <meta charset=utf-8 /> <meta name=viewport content="width=device-width, initial-scale=1.0"/> <meta name=google-site-verification content=lC7-hHwqtiRqo7YTHc1fJ6t8ie-Hs7J4o5u3XRIF9Vw /> <link rel=alternate type="application/atom+xml" title="Atom Feed" href="/feed.xml"/> <link href="/stylesheets/app.css" media=screen rel=stylesheet /> <script src="/javascripts/all.js"></script> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-836728-7', 'sourcey.com');
      ga('send', 'pageview');
    </script> </head> <body class="article generating-beautiful-markdown-documentation-with-moxygen generating-beautiful-markdown-documentation-with-moxygen_index"> <nav class=top-bar data-topbar=""> <div class=top-bar-inner> <div id=social> <a rel="nofollow" href="https://github.com/sourcey"><i class=fi-social-github></i></a> <a href="https://twitter.com/sourceydevel"><i class=fi-social-twitter></i></a> <a href="https://plus.google.com/+SourceyDevel"><i class=fi-social-google-plus></i></a> <a href="https://facebook.com/sourceydevel"><i class=fi-social-facebook></i></a> </div> <ul class=title-area> <li class=name></li> <li class="toggle-topbar menu-icon"><a href="#" class=left></a></li> </ul> <section class=top-bar-section style="left: 0%;"> <ul class=left> <li class=home><a href="/">Home</a></li> <li class=has-dropdown><a href="/#projects">Projects</a> <ul class=dropdown><li class="title back js-generated"><h5><a href="javascript:void(0)">Back</a></h5></li> <li> <a href="/libsourcey"><b>LibSourcey</b><small>C++ networking evolved</small></a> </li> <li> <a href="/anionu"><b>Anionu</b><small>Cloud video surveillance</small></a> </li> <li> <a href="http://stompstart.com"><b>StompStart</b><small>Promote your startup</small></a> </li> <li> <a href="/symple"><b>Symple</b><small>Messaging made Symple</small></a> </li> <li> <a href="/mesh"><b>Mesh</b><small>Elegant, modern design</small></a> </li> <li> <a href="/pacm"><b>Pacm</b><small>Redistributable package manager</small></a> </li> <li> <a href="/pluga"><b>Pluga</b><small>C++ plugin system</small></a> </li> <li> <a href="http://artzine.com"><b>Artzine</b><small>European Art Gallery and Marketplace</small></a> </li> <li> <a href="/recliner"><b>Recliner.js</b><small>Flexible lazy loading</small></a> </li> </ul> </li> <li class=has-dropdown><a href="/#articles">Articles</a> <ul class=dropdown> <li><a href="/archives">Archives</a></li> <li><a href="/feed.xml">Feed</a></li> </ul> </li> <li><a href="mailto:hello@sourcey.com">Contact</a></li> <li class=divider></li> </ul> </section> </div> </nav> <div id=main role=main> <article> <header class=article-header> <h1>Generating Beautiful C++ Markdown Documentation with Moxygen</h1> <div class=meta> <a rel="author external" class=author href="https://plus.google.com/+KamLow">Kam Low</a> &mdash; <time class=updated datetime="Nov 10 2016">Nov 10 2016</time> <div class=tags> <a href="/tags/documentation/">Documentation</a>, <a href="/tags/markdown/">Markdown</a>, <a href="/tags/moxygen/">Moxygen</a> </div> </div> </header> <div class="article-wrap row"> <div class="large-8 columns"> <div class=content> <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd"> <html><body> <p>For years generating simple and elegant documentation has been a thorn in the side for C++ developers. The two main purpose built tools for the job that have been around forever are Doxygen and Sphynx, are either one would be ideal if you wanted to generate documentation that looks like it belongs in a Windows 3.1 help file.</p> <p>I’ve been aware of the situation for some time, but about a month ago I resumed my search for a simple C++ documentation solution for <a href="http://sourcey.com/libsourcey/">LibSourcey</a>, and discovered there was still absolutely nothing out there. So as any self respecting hacker would so, I set out to build one in sheer disgust.</p> <p>The following three sections are about the state of C++ parsers and documentation generators, so if you want to go straight to installing and using Moxygen then <a href="#using-moxygen">click here</a></p> <h2 id=why-markdown>Why Markdown?</h2> <p>There are those that <a href="http://ericholscher.com/blog/2016/mar/15/dont-use-markdown-for-technical-docs/">dismiss</a> Markdown as a viable solution for generating API documentation, and yes, it’s true that the format has it’s standardisation issues, but those are covered in all the important libraries, and if you don’t need to generate highly technical documentation then I ask you, why not?</p> <ul> <li>Markdown is a pervasive format and only gaining traction</li> <li>You can keep your README and other help docs in the same format as your API spec</li> <li>It’s easy to read in source</li> <li>There are many Markdown to HTML generators available</li> <li>You can drop the spec directly into a Jekyll or Middleman type static website generator</li> <li>GitBook can convert Markdown to PDF, Moby and ePub</li> </ul> <p>OK enough blathering, point made…</p> <h2 id=parsing-c>Parsing C++</h2> <p>The first thing that’s required is to output C++ code into a more parsable format, such as XML or similar. The aren’t many solutions for parsing C++, and the reason for that is because the language is so bloody hard to parse.</p> <p>There only real viable open source solutions that I’m aware of are:</p> <ul> <li> <p><strong>CastXML</strong> — CastXML is as XML output extension for GCC, and the successor to GCCXML. While GCC is an awesome compiler and C++ parser, it only works on unix systems which makes cross platform an issue, and by the time the C++ is processed by the parser the comments are long gone - therefore and extra process would be required to extract source code comments. Doable, but not ideal.</p> </li> <li> <p><strong>Clang</strong> — Clang has an awesome standards compliant C++ parser, it’s cross platform, but unfortunately it outputs the <a href="http://clang.llvm.org/docs/IntroductionToTheClangAST.html">AST</a> format which would be a Herculean feat to turn into something readable. Let’s keep looking.</p> </li> <li> <p><strong>Doxygen XML</strong> — I know I badmouthed Doxygen in the first paragraph, but Doxygen is actually pretty awesome (just the HTML output stinks). It works cross platform, supports many languages (good for the future development of our Markdown generator), and also outputs raw XML that is relatively easy to parse. Perfect!</p> </li> </ul> <h2 id=generating-markdown>Generating Markdown</h2> <p>Markdown is a relatively new kid on the block, especially in the somewhat dusty world of C++, therefore one couldn’t expect that there would be a lot of tools available in the Markdown department just yet.</p> <p>I found two projects that were of some use:</p> <ul> <li> <p><strong>cldoc</strong> — <a rel="nofollow" href="https://github.com/jessevdk/cldoc">Cldoc</a> is a python project based on the Clang parser, and actually outputs pretty nice <a href="http://jessevdk.github.io/cldoc/example/">documentation</a> and apparently also outputs Markdown. Unfortunately though the issues are piling up on Github and it looks pretty unmaintained at this point in time.</p> </li> <li> <p><strong>doxygen2md</strong> — <a rel="nofollow" href="https://github.com/pferdinand/doxygen2md">doxygen2md</a> is a super simple nodejs parser for Doxygen XML output. Unfortunately it’s only suitable for simple single page documentation. It borked at multiple points when parsing the Doxygen output from LibSourcey, and it also produced some pretty interesting output when I threw some nested namespaces at it.</p> </li> </ul> <p>As it stands the best C++ documentation parser available for C++ is currently Doxygen, and as nodejs is a quick and easy platform to work on I opted to extend the parser from doxygen2md in order to build <a rel="nofollow" href="https://github.com/sourcey/moxygen">Moxygen</a>.</p> <h2 id=using-moxygen>Using Moxygen</h2> <ol> <li>Install <a href="https://www.stack.nl/~dimitri/doxygen/manual/install.html">Doxygen</a>.</li> <li>Add <code>GENERATE_XML=YES</code> to your <code>Doxyfile</code>.</li> <li>Run <code>doxygen</code> to generate the XML documentation.</li> <li>Install <code>moxygen</code> like so: <code>npm install moxygen -g</code>.</li> <li>Run <code>moxygen</code> providing the folder location of the XML documentation as the first argument ie. <code>{OUTPUT_DIRECTORY}/xml</code>.</li> </ol> <div class=highlight><pre class="highlight plaintext"><code>Usage: moxygen [options] &lt;doxygen directory&gt;

Options:

  -h, --help             output usage information
  -V, --version          output the version number
  -v, --verbose          verbose mode
  -a, --anchors          add anchors to internal links
  -g, --modules          output doxygen modules into separate files
  -l, --language &lt;lang&gt;  programming language
  -t, --templates &lt;dir&gt;  custom templates directory
  -o, --output &lt;file&gt;    output file (must contain %s when using modules)
</code></pre></div> <h3 id=single-page-output>Single Page Output</h3> <p>If you want single page Markdown output the you can run Moxygen like so:</p> <div class=highlight><pre class="highlight plaintext"><code>moxygen --anchors --output api.md /path/to/doxygen/xml
</code></pre></div> <h3 id=multi-page-output>Multi Page Output</h3> <p>Moxygen supports the doxygen <a href="http://www.stack.nl/~dimitri/doxygen/manual/grouping.html#modules">modules</a> syntax for generating multi page documentation.</p> <p>Every <a href="http://www.stack.nl/~dimitri/doxygen/manual/commands.html#cmddefgroup">\defgroup</a> in your source code will be parsed into a separate output files, with internal reference updated accordingly.</p> <p>Example:</p> <div class=highlight><pre class="highlight plaintext"><code>moxygen --anchors --modules --output api-%s.md /path/to/doxygen/xml
</code></pre></div> <h2 id=hosting-your-documentation>Hosting Your Documentation</h2> <p>We use a combination of GitBook and Middleman for <a href="http://sourcey.com/libsourcey/">LibSourcey</a>. It’s very easy to setup; the GitBook is located in the <code>doc</code> folder of the <a rel="nofollow" href="https://github.com/sourcey/libsourcey/tree/master/doc">repository</a>, with symlinks to the main README and LICENSE files so they can be reused in the book. Next the static GitBook HTML is copied across to out Middleman website and deployed using GitHub pages. All in all a very convenient (and cost effective!) solution.</p> <p>You could also opt to store your documentation on a separate GitBook repository, that way you would just need to push your repository to update your live documentation.</p> <h2 id=conclusion>Conclusion</h2> <p>It’s my hope that with Moxygen, C++ developers will now have a way to generate more aesthetically pleasing and readable documentation. Since we only ever look at the docs when we absolutely have to, let’s make the process as enjoyable as possible! :)</p> </body></html> </div> </div> <div class="large-4 columns"> <div class=sidebar> <div class="sidebar-section toc"> <h4 class=no_toc id=contents>Contents</h4> <ul id=markdown-toc> <li><a id=markdown-toc-why-markdown href="#why-markdown">Why Markdown?</a></li> <li><a id=markdown-toc-parsing-c href="#parsing-c">Parsing C++</a></li> <li><a id=markdown-toc-generating-markdown href="#generating-markdown">Generating Markdown</a></li> <li> <a id=markdown-toc-using-moxygen href="#using-moxygen">Using Moxygen</a> <ul> <li><a id=markdown-toc-single-page-output href="#single-page-output">Single Page Output</a></li> <li><a id=markdown-toc-multi-page-output href="#multi-page-output">Multi Page Output</a></li> </ul> </li> <li><a id=markdown-toc-hosting-your-documentation href="#hosting-your-documentation">Hosting Your Documentation</a></li> <li><a id=markdown-toc-conclusion href="#conclusion">Conclusion</a></li> </ul> </div> <div class="sidebar-section ad ad-300x250 sidebar-float"> <ins class=adsbygoogle style="display:inline-block;width:300px;height:600px" data-ad-client=ca-pub-1397369873900370 data-ad-slot=7510590887></ins> <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script> </div> </div> </div> </article> <div class=row> <div class=social-buttons> <ul> <li> <a href="http://twitter.com/share" class="socialite twitter-share" data-text="Generating Beautiful C++ Markdown Documentation with Moxygen" data-url="https://sourcey.com/generating-beautiful-markdown-documentation-with-moxygen/" data-count=vertical rel=nofollow target=_blank><span class=vhidden>Share on Twitter</span></a> </li> <li> <a href="https://plus.google.com/share?url=https://sourcey.com/generating-beautiful-markdown-documentation-with-moxygen/" class="socialite googleplus-one" data-size=tall data-href="https://sourcey.com/generating-beautiful-markdown-documentation-with-moxygen/" rel=nofollow target=_blank><span class=vhidden>Share on Google+</span></a> </li> <li> <a href="http://www.facebook.com/sharer.php?u=https://sourcey.com/generating-beautiful-markdown-documentation-with-moxygen/&amp;t=Generating Beautiful C++ Markdown Documentation with Moxygen" class="socialite facebook-like" data-href="https://sourcey.com/generating-beautiful-markdown-documentation-with-moxygen/" data-send=false data-layout=box_count data-width=60 data-show-faces=false rel=nofollow target=_blank><span class=vhidden>Share on Facebook</span></a> </li> <li> <a href="http://www.linkedin.com/shareArticle?mini=true&amp;url=https://sourcey.com/generating-beautiful-markdown-documentation-with-moxygen/&amp;title=Generating Beautiful C++ Markdown Documentation with Moxygen" class="socialite linkedin-share" data-url="https://sourcey.com/generating-beautiful-markdown-documentation-with-moxygen/" data-counter=top rel=nofollow target=_blank><span class=vhidden>Share on LinkedIn</span></a> </li> </ul> </div> </div> <div id=disqus_thread></div> <script>
          /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
          var disqus_shortname = 'sourcey'; // required: replace example with your forum shortname

          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
      </script> <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" rel=nofollow>comments powered by Disqus.</a></noscript> <a href="http://disqus.com" rel=nofollow class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a> </div> <footer id=footer> <div class="row show-for-large-up"> <div class="ad ad-720x90 text-center"> <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <ins class=adsbygoogle style="display:inline-block;width:728px;height:90px" data-ad-client=ca-pub-1397369873900370 data-ad-slot=8042301285></ins> <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
          </script> </div> </div> <p> As with all business minded artists, we have fought the inevitable battle of conformity vs expression, and have emerged victorious with sanity intact to plunder the digiverse in search of new and interesting challenges. For more information, or a quote, drop us an email and tell us what you're working on. </p> <p>&copy; 2016 Sourcey<p> </footer> </body> </html>